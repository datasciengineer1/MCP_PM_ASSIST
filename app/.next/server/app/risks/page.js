(()=>{var e={};e.id=867,e.ids=[867],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},88369:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(12260),t(1037),t(35866);var a=t(23191),r=t(88716),i=t(37922),l=t.n(i),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["risks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,12260)),"/Users/ravinangara/Documents/PMASSIST_MCP/pm_assistant_mvpf/app/app/risks/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,1037)),"/Users/ravinangara/Documents/PMASSIST_MCP/pm_assistant_mvpf/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/ravinangara/Documents/PMASSIST_MCP/pm_assistant_mvpf/app/app/risks/page.tsx"],x="/risks/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/risks/page",pathname:"/risks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79503:(e,s,t)=>{Promise.resolve().then(t.bind(t,68132))},68132:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var a=t(10326),r=t(17577),i=t(33071),l=t(90772),n=t(567),c=t(54432),d=t(87673),o=t(34474),x=t(30613),h=t(45842),u=t(83855),p=t(88307),m=t(41137),j=t(50949),g=t(58038),v=t(79635),f=t(37358),y=t(94215),N=t(45344),b=t(98129),w=t(91947);function I(){let[e,s]=(0,r.useState)([]),[t,I]=(0,r.useState)([]),[S,C]=(0,r.useState)(!0),[M,k]=(0,r.useState)(""),[E,T]=(0,r.useState)("all"),[A,_]=(0,r.useState)(!1),[D,P]=(0,r.useState)({title:"",description:"",category:"TECHNICAL",probability:"MEDIUM",impact:"MEDIUM",projectId:"",mitigation:"",owner:""}),{toast:O}=(0,y.pm)(),L=async()=>{try{C(!0);let e=await fetch("/api/risks");if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Error fetching risks:",e),O({title:"Error",description:"Failed to load risks",variant:"destructive"})}finally{C(!1)}},R=async()=>{try{if((await fetch("/api/risks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)})).ok)O({title:"Success",description:"Risk created successfully"}),_(!1),P({title:"",description:"",category:"TECHNICAL",probability:"MEDIUM",impact:"MEDIUM",projectId:"",mitigation:"",owner:""}),L();else throw Error("Failed to create risk")}catch(e){console.error("Error creating risk:",e),O({title:"Error",description:"Failed to create risk",variant:"destructive"})}},Q=e.filter(e=>{let s=e.title.toLowerCase().includes(M.toLowerCase())||e.description.toLowerCase().includes(M.toLowerCase()),t="all"===E||e.category===E;return s&&t}),U=e=>{switch(e){case"CRITICAL":return"bg-red-500";case"HIGH":return"bg-orange-500";case"MEDIUM":return"bg-yellow-500";case"LOW":return"bg-green-500";default:return"bg-gray-500"}},Z=e=>{switch(e){case"RESOLVED":return"bg-green-500";case"MITIGATING":return"bg-blue-500";case"ASSESSING":return"bg-yellow-500";case"IDENTIFIED":default:return"bg-gray-500";case"CLOSED":return"bg-purple-500"}},F=(e,s)=>("LOW"===e?1:"MEDIUM"===e?2:"HIGH"===e?3:4)*("LOW"===s?1:"MEDIUM"===s?2:"HIGH"===s?3:4),H=e=>e>=12?"text-red-600":e>=6?"text-orange-600":e>=3?"text-yellow-600":"text-green-600";return S?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[a.jsx(b.Sidebar,{className:"hidden lg:block"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(w.Header,{title:"Risk Management",subtitle:"Identify, assess, and mitigate project risks"}),a.jsx("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("div",{}),(0,a.jsxs)(x.Vq,{open:A,onOpenChange:_,children:[a.jsx(x.hg,{asChild:!0,children:(0,a.jsxs)(l.z,{children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"New Risk"]})}),(0,a.jsxs)(x.cZ,{className:"max-w-2xl",children:[(0,a.jsxs)(x.fK,{children:[a.jsx(x.$N,{children:"Create New Risk"}),a.jsx(x.Be,{children:"Add a new risk to your project risk register"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"project",children:"Project"}),(0,a.jsxs)(o.Ph,{value:D.projectId,onValueChange:e=>P(s=>({...s,projectId:e})),children:[a.jsx(o.i4,{children:a.jsx(o.ki,{placeholder:"Select project"})}),a.jsx(o.Bw,{children:t.map(e=>a.jsx(o.Ql,{value:e.id,children:e.title},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"title",children:"Risk Title"}),a.jsx(c.I,{id:"title",value:D.title,onChange:e=>P(s=>({...s,title:e.target.value})),placeholder:"Enter risk title"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"description",children:"Description"}),a.jsx(d.g,{id:"description",value:D.description,onChange:e=>P(s=>({...s,description:e.target.value})),placeholder:"Describe the risk",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"category",children:"Category"}),(0,a.jsxs)(o.Ph,{value:D.category,onValueChange:e=>P(s=>({...s,category:e})),children:[a.jsx(o.i4,{children:a.jsx(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"TECHNICAL",children:"Technical"}),a.jsx(o.Ql,{value:"BUSINESS",children:"Business"}),a.jsx(o.Ql,{value:"OPERATIONAL",children:"Operational"}),a.jsx(o.Ql,{value:"FINANCIAL",children:"Financial"}),a.jsx(o.Ql,{value:"TIMELINE",children:"Timeline"}),a.jsx(o.Ql,{value:"RESOURCE",children:"Resource"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"probability",children:"Probability"}),(0,a.jsxs)(o.Ph,{value:D.probability,onValueChange:e=>P(s=>({...s,probability:e})),children:[a.jsx(o.i4,{children:a.jsx(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"LOW",children:"Low"}),a.jsx(o.Ql,{value:"MEDIUM",children:"Medium"}),a.jsx(o.Ql,{value:"HIGH",children:"High"}),a.jsx(o.Ql,{value:"CRITICAL",children:"Critical"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"impact",children:"Impact"}),(0,a.jsxs)(o.Ph,{value:D.impact,onValueChange:e=>P(s=>({...s,impact:e})),children:[a.jsx(o.i4,{children:a.jsx(o.ki,{})}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"LOW",children:"Low"}),a.jsx(o.Ql,{value:"MEDIUM",children:"Medium"}),a.jsx(o.Ql,{value:"HIGH",children:"High"}),a.jsx(o.Ql,{value:"CRITICAL",children:"Critical"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"mitigation",children:"Mitigation Strategy"}),a.jsx(d.g,{id:"mitigation",value:D.mitigation,onChange:e=>P(s=>({...s,mitigation:e.target.value})),placeholder:"Describe mitigation strategy",rows:2})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(h._,{htmlFor:"owner",children:"Risk Owner"}),a.jsx(c.I,{id:"owner",value:D.owner,onChange:e=>P(s=>({...s,owner:e.target.value})),placeholder:"Assign risk owner"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx(l.z,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),a.jsx(l.z,{onClick:R,children:"Create Risk"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx(c.I,{placeholder:"Search risks...",value:M,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(o.Ph,{value:E,onValueChange:T,children:[(0,a.jsxs)(o.i4,{className:"w-[180px]",children:[a.jsx(m.Z,{className:"w-4 h-4 mr-2"}),a.jsx(o.ki,{})]}),(0,a.jsxs)(o.Bw,{children:[a.jsx(o.Ql,{value:"all",children:"All Categories"}),a.jsx(o.Ql,{value:"TECHNICAL",children:"Technical"}),a.jsx(o.Ql,{value:"BUSINESS",children:"Business"}),a.jsx(o.Ql,{value:"OPERATIONAL",children:"Operational"}),a.jsx(o.Ql,{value:"FINANCIAL",children:"Financial"}),a.jsx(o.Ql,{value:"TIMELINE",children:"Timeline"}),a.jsx(o.Ql,{value:"RESOURCE",children:"Resource"})]})]})]}),a.jsx("div",{className:"grid gap-4",children:0===Q.length?a.jsx(i.Zb,{children:a.jsx(i.aY,{className:"flex items-center justify-center py-10",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No risks found"}),(0,a.jsxs)(l.z,{onClick:()=>_(!0),children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Create your first risk"]})]})})}):Q.map(e=>{let s=F(e.probability,e.impact);return(0,a.jsxs)(i.Zb,{className:"hover:shadow-md transition-shadow",children:[a.jsx(i.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(j.Z,{className:"w-5 h-5 text-orange-500"}),a.jsx(i.ll,{className:"text-lg",children:e.title})]}),a.jsx(i.SZ,{className:"mt-2",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("div",{className:`text-2xl font-bold ${H(s)}`,children:s}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Risk Score"})]}),a.jsx(n.C,{className:`${Z(e.status)} text-white`,children:e.status})]})]})}),a.jsx(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)(n.C,{className:`${U(e.probability)} text-white`,children:["Probability: ",e.probability]}),(0,a.jsxs)(n.C,{className:`${U(e.impact)} text-white`,children:["Impact: ",e.impact]}),a.jsx(n.C,{variant:"outline",children:e.category})]}),e.mitigation&&(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx(g.Z,{className:"w-4 h-4 text-green-500 mt-0.5"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Mitigation"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.mitigation})]})]}),a.jsx("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{className:"flex gap-4 text-sm text-muted-foreground",children:[e.owner&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(v.Z,{className:"w-4 h-4"}),e.owner]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[a.jsx(f.Z,{className:"w-4 h-4"}),a.jsx(N.y,{date:e.createdAt})]})]})})]})})]},e.id)})})]})})]})]})}},45344:(e,s,t)=>{"use strict";t.d(s,{y:()=>h});var a=t(10326),r=t(17577),i=t(94629),l=t(88206),n=t(99781),c=t(43686);let d=e=>{if(!e)return"N/A";let s="string"==typeof e?(0,i.D)(e):e;return(0,l.J)(s)?(0,n.WU)(s,"MMM d, yyyy"):"Invalid Date"},o=e=>{if(!e)return"N/A";let s="string"==typeof e?(0,i.D)(e):e;return(0,l.J)(s)?(0,n.WU)(s,"MMM d, yyyy h:mm a"):"Invalid Date"},x=e=>{if(!e)return"N/A";let s="string"==typeof e?(0,i.D)(e):e;return(0,l.J)(s)?(0,c.Q)(s,{addSuffix:!0}):"Invalid Date"},h=({date:e,format:s="date"})=>{let[t,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{i(!0)},[]),t)?a.jsx("span",{children:({date:d,datetime:o,relative:x})[s](e)}):a.jsx("span",{children:"--"})}},45842:(e,s,t)=>{"use strict";t.d(s,{_:()=>o});var a=t(10326),r=t(17577),i=t(45226),l=r.forwardRef((e,s)=>(0,a.jsx)(i.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=t(28671),c=t(77863);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},t)=>a.jsx(l,{ref:t,className:(0,c.cn)(d(),e),...s}));o.displayName=l.displayName},87673:(e,s,t)=>{"use strict";t.d(s,{g:()=>l});var a=t(10326),r=t(17577),i=t(77863);let l=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));l.displayName="Textarea"},94215:(e,s,t)=>{"use strict";t.d(s,{pm:()=>h});var a=t(17577);let r=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],d={toasts:[]};function o(e){d=n(d,e),c.forEach(e=>{e(d)})}function x({...e}){let s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...e,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,s]=a.useState(d);return a.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},37358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},41137:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},83855:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},58038:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(62881).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},12260:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/ravinangara/Documents/PMASSIST_MCP/pm_assistant_mvpf/app/app/risks/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,700,230,789,180,179,640,694],()=>t(88369));module.exports=a})();